# 동차좌표계 발표 자료

## 동차좌표계란
사영 기하학에서 동차좌표(homogeneous coordinates)는 n차원 사영 공간을 n+1개의 좌표로 나타내는 좌표계다.

## 왜 그래픽스에서 동차좌표계를 사용해야하는가
- 3D공간에서 변환 행렬을 효과적으로 사용할 수 있기 때문입니다.
  
- 3x3 행렬은 주로 2차원 변환(회전, 크기 조절, 기울기 등)을 표현하는 데 사용됩니다. 
  
- 하지만 3D 게임에서는 3차원 공간에서 오브젝트를 변환해야 하므로 동차좌표계를 사용하여 차원을 하나 더한  4x4 행렬을 사용합니다.
  
- 4x4 행렬을 사용하여 3차원 변환을 표현하는 이유는 위치 변환(translation)과 투영 변환(projection)을 포함한 다양한 변환을 효과적으로 표현하기 위함입니다. 동차 좌표계를 사용하여 4x4 행렬은 변환의 조합을 단일 행렬로 표현하여 복잡한 변환을 간결하게 나타낼 수 있습니다.

## 동차좌표계의 활용
- 동차좌표계를 활용한 수식과 코드를 보여드리겠습니다.
  
- 중간고사 2번 문제에서 나온 카메라 회전부분을 동차좌표계를 사용하여 카메라를 회전 시켜보겠습니다.
  
- 동차좌표계 행렬 = 회전 행렬×초기 동차좌표계 행렬 입니다.
  
- 카메라의 초기 위치는 0,0,0임으로 초기 동차좌표계 행렬 입니다.
![초기동차좌표](/img/초기동차좌표.png)

- 회전 행렬은 y축을 기준으로 90도씩 회전 시킬 것임으로 이것입니다.
![회전행렬](/img/회전%20행렬.png)

- 위 두 행렬을 4x4행렬 곱을 사용하여 카메라를 90도 회전 시킨 값 입니다.
  
  ![동차좌표계 행렬](/img/90도%20회전%20동차좌표.png)

- 이제 유니티에서 카메라를 동차좌표계를 사용하여 회전시켜보겠습니다. 아래는 그 코드와 실행 결과입니다.

- homogeneousMatrix는 초기 동차좌표계 행렬을 나타내며, SetTRS 함수를 사용하여 이를 설정합니다. 이 함수는 위치, 회전 및 크기를 사용하여 변환 행렬을 설정합니다. 여기서는 위치를 (0, 0, 0)으로, 회전을 Euler 각도 (45, 0, 0)으로 설정하고, 크기를 (1, 1, 1)로 지정하여 초기 동차좌표로 설정하기 위해서는 그에 맞는 위치와 회전을 전달해주어야 합니다.

![유니티 초기 동차좌표계 행렬](/img/유니티%20코드%20초기%20동차좌표계.png)

- 이제 Y축을 중심으로 회전하는 4x4 회전 행렬을 생성합니다. 
이 함수는 주어진 각도를 라디안으로 변환한 후, 코사인과 사인 값을 사용하여 회전 행렬을 생성하고 반환된 회전 행렬은 입력된 행렬과 곱해져서 새로운 변환을 적용하는 데 사용됩니다.

![유니티 회전 행렬](/img/유니티%20코드%20y축%20기준%20회전%20행렬.png)


-  회전 행렬×초기 동차좌표계 행렬 = 동차좌표계 행렬 
  ![유니티 회전 행렬 곱](/img/유니티%20코드%20회전%20행렬%20곱.png)

- 위 스크립트를 사용한 유니티 실행 화면 입니다.

키보드 O,P키를 눌렀을때 Y축을 기준으로 90도 회전
  ![유니티 실행화면](/img/유니티%20실행.gif)